---
layout: page
title: "Recettes low carb"
description: "Mes recettes low carb (recettes faibles en glucides). Index par catÃ©gories."
page_h1: "Mes recettes low carb"
page_h3: "ou recettes faibles en glucides"
page_h2_orange: "Travail en cours !"
body_id: "home"
---

<section id="index">
  <h2>Index</h2>

  <!-- Styles locaux (index) -->
  <style>
    /* CatÃ©gories plus visibles */
    .recipe-category-title{
      margin-top: 1.25rem;
      margin-bottom: .75rem;
      padding: .6rem .75rem;
      border-left: .35rem solid currentColor;
      background: rgba(0,0,0,.04);
      border-radius: .35rem;
      font-weight: 800;
      letter-spacing: .2px;
    }
    .recipe-category-title a{
      text-decoration: none;
      border-bottom: none;
      color: inherit;
    }
  </style>

  <!-- Suggestion alÃ©atoire -->
  <div class="mb-4">
    <div id="random-pick"></div>
  </div>

  <!-- Liens fixes vers index filtrÃ©s (hors tirage) -->
  <div class="random-pick-links mt-2">

    {% assign all_recipes = site.pages | where: "layout", "recipe" | where_exp: "p", "p.recipe_group" %}
    {% assign grouped = all_recipes | group_by: "recipe_group" | sort: "name" %}

    {%- assign hidden_tags = "low-carb-modere,low-carb-strict,gout-sucre" | split: "," -%}

    <!-- Sections catÃ©gories -->
    <div id="recipes-index">
      {% for g in grouped %}
        <h3 id="{{ g.name | slugify }}" class="recipe-category-title">
          <a href="#{{ g.name | slugify }}">{{ g.name }}</a>
        </h3>

        <div class="recipe-group-block mb-4" data-recipe-group="{{ g.name | escape }}">
          {% assign group_recipes = g.items | sort: "recipe_sort" %}

          <div class="recipes-grid">
            {% for r in group_recipes %}
              <article
                class="recipe-card mb-2"
                data-tags="{{ r.tags | join: ',' | escape }}"
                data-micros="{{ r.badges_nutritionnels | join: ',' | escape }}"
              >
                <a
                  class="recipe-card-link"
                  href="{{ r.url | relative_url }}"
                  data-tested="{{ r.recipe_tested }}"
                  data-title="{{ r.recipe_title | escape }}"
                >
                  <div class="recipe-card-top">
                    <h4 class="recipe-card-title">{{ r.recipe_title }}</h4>

                    {% if r.recipe_tested == false %}
                      <span class="badge bg-warning text-dark ms-2">Recette non testÃ©e</span>
                    {% endif %}
                  </div>

                  <div class="recipe-badges-wrap">
                    <!-- Ligne 1 : badges (tags) -->
                    {% if r.tags %}
                      <ul class="recipe-badges-line badges-tags" aria-label="Badges">
                        {% for tag in r.tags %}
                          {% unless hidden_tags contains tag %}
                            {% case tag %}
                              {% when "tres-proteine" %}<li title="TrÃ¨s protÃ©inÃ©">ğŸ’ª</li>
                              {% when "riche-en-fibres" %}<li title="Riche en fibres">ğŸ’©</li>
                              {% when "rapide" %}<li title="Rapide">â±ï¸</li>
                              {% when "congelable" %}<li title="Congelable">â„ï¸</li>
                              {% when "micro-ondable" %}<li title="Micro-ondable">â™¨ï¸</li>
                              {% when "peu-calorique" %}<li title="Peu calorique">ğŸª¶</li>
                              {% when "calorique" %}<li title="Calorique">ğŸ”¥</li>
                              {% when "longue" %}<li title="PrÃ©paration longue">ğŸŒ</li>
                            {% endcase %}
                          {% endunless %}
                        {% endfor %}
                      </ul>
                    {% endif %}

                    <!-- Ligne 2 : micronutriments (affichÃ©e seulement si prÃ©sents) -->
                    {% assign micros = r.badges_nutritionnels | default: "" %}
                    {% if micros and micros.size > 0 %}
                      <ul class="recipe-badges-line badges-micro" aria-label="Micronutriments">
                        {% for m in micros %}
                          {% case m %}
                            {% when "omega-3" %}<li title="OmÃ©ga-3">ğŸŸ</li>
                            {% when "vitamine-a" %}<li title="Vitamine A">ğŸ‘ï¸</li>
                            {% when "vitamine-c" %}<li title="Vitamine C">ğŸ‹</li>
                            {% when "vitamine-d" %}<li title="Vitamine D">ğŸŒ¤ï¸</li>
                            {% when "vitamine-e" %}<li title="Vitamine E">ğŸ›¡ï¸</li>
                            {% when "vitamine-k" %}<li title="Vitamine K">ğŸ©¸</li>
                            {% when "vitamine-b9" %}<li title="Vitamine B9">ğŸŒ±</li>
                            {% when "vitamine-b12" %}<li title="Vitamine B12">ğŸ¥©</li>
                            {% when "calcium" %}<li title="Calcium">ğŸ¦´</li>
                            {% when "fer" %}<li title="Fer">ğŸ§²</li>
                            {% when "magnesium" %}<li title="MagnÃ©sium">âš¡</li>
                            {% when "potassium" %}<li title="Potassium">ğŸŒ</li>
                            {% when "zinc" %}<li title="Zinc">ğŸ”©</li>
                            {% when "selenium" %}<li title="SÃ©lÃ©nium">ğŸ§ª</li>
                            {% when "iode" %}<li title="Iode">ğŸŒŠ</li>
                          {% endcase %}
                        {% endfor %}
                      </ul>
                    {% endif %}
                  </div>

                </a>
              </article>
            {% endfor %}
          </div>

        </div>
      {% endfor %}
    </div>

    <hr class="my-4">

    <div class="text-center muted">
      DerniÃ¨re mise Ã  jour le {{ site.time | date: "%d/%m/%Y" }}
    </div>
  </div>

</section>

<script>
  // Script pour afficher une recette tirÃ©e au hasard
  const EXCLUDED_TAG = "gout-sucre";
  const HIDDEN_TAGS = new Set(["low-carb-modere", "low-carb-strict", "gout-sucre"]);
  const EXCLUDED_GROUPS = [
    "amuse-bouche", "boissons", "pains & substituts", "pÃ¢tes & fonds", "sauces & assaisonnements",
    "lÃ©gumes & accompagnements", "prÃ©parations & conservations", "barres nutritionnelles"
  ];

  const indexRoot = document.getElementById("recipes-index");
  const pickHost = document.getElementById("random-pick");

  function getCandidates() {
    if (!indexRoot) return [];
    return Array.from(indexRoot.querySelectorAll(".recipe-card a[href]"))
      .filter(isValidRecipeLink)
      .filter(a => !hasExcludedTag(a.closest(".recipe-card")) && !isInExcludedGroup(a));
  }

  function pickRandom(links) {
    if (links.length === 0) return null;
    let a;
    do {
      a = links[Math.floor(Math.random() * links.length)];
    } while (a.getAttribute("href") === lastHref);
    lastHref = a.getAttribute("href");
    return a;
  }

  function renderPick(a) {
    const href = a.getAttribute("href");
    const title = a.dataset.title.trim();
    pickHost.innerHTML = `
      <div class="pick-card">
        <div class="pick-card-body text-center">
          <div class="mb-2 fw-bold fs-4">On mange quoi&nbsp;?</div>
          <h3 class="h5 mb-2">${title}</h3>
          <div class="d-flex justify-content-center gap-2 mt-3">
            <a class="btn btn-primary" href="${href}">Ã‡a me plaÃ®t</a>
            <button id="btn-reroll" class="btn btn-outline-secondary">Autre idÃ©e</button>
          </div>
        </div>
      </div>
    `;
    document.getElementById("btn-reroll").addEventListener("click", pickAndRender);
  }

  function pickAndRender() {
    const links = getCandidates();
    if (links.length === 0) return;
    const a = pickRandom(links);
    if (a) renderPick(a);
  }

  pickAndRender();
</script>

