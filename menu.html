---
layout: page
title: "Menu hebdomadaire"
description: "G√©n√©rateur de menu hebdomadaire low carb"
page_h1: "Menu hebdomadaire"
page_h3: "G√©n√©rateur + calculs"
body_id: "menu"
---

<section class="site-container">

  <!-- ================= CALCULS (cach√©s par d√©faut) ================= -->
  <section class="marge" id="outils-calculs">
    <h2>Outils de calcul : BMR, activit√© et calories cible</h2>

    <div class="content-surface">

      <div class="d-flex flex-wrap gap-2 align-items-center mb-3">
        <button
          class="btn btn-outline-secondary"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#calculatorsCollapse"
          aria-expanded="false"
          aria-controls="calculatorsCollapse"
          id="toggleCalculatorsBtn"
        >
          Afficher les calculateurs
        </button>

        <div class="small text-muted">
          (Optionnel) Recommand√© si tu veux synchroniser automatiquement ‚Äúkcal/jour‚Äù avec la cible calcul√©e.
        </div>
      </div>

      <div class="collapse" id="calculatorsCollapse">
        <div class="card">
          <div class="card-body">

            {% include bmr-calculator.html %}
            <hr class="my-4">
            {% include activity-level.html %}
            <hr class="my-4">
            {% include calorie-target.html %}

          </div>
        </div>

        <p class="small text-muted mt-3 mb-0">
          Remarque : ce sont des estimations. La validation se fait sur la tendance (3‚Äì4 semaines),
          pas sur une journ√©e isol√©e.
        </p>
      </div>

    </div>
  </section>

  <!-- ================= MENU BUILDER ================= -->
  {% include menu-builder.html %}

  <button type="button" id="generatePdfMenu" class="btn btn-primary mt-3">
    G√©n√©rer le PDF du menu
  </button>

</section>

<!-- ================= TEMPLATES MENU BUILDER ================= -->

<template id="tpl-menu-day">
  <div>
    <div class="card mb-4">
      <div class="card-header fw-bold js-day-title"></div>
      <div class="card-body">
        <div class="d-flex flex-column gap-2 js-meals-wrap"></div>
        <div class="mt-3 js-day-total"></div>
      </div>
    </div>
  </div>
</template>

<template id="tpl-menu-meal">
  <div>
    <div class="card">
      <div class="card-body py-2">
        <div class="fw-bold mb-2 js-meal-title"></div>
        <div class="d-flex flex-column gap-2 js-slots-wrap"></div>
        <div class="mt-2 d-flex justify-content-end">
          <button
            type="button"
            class="btn btn-outline-primary btn-sm js-btn-add-slot"
            data-action="add-slot">
            +
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<template id="tpl-menu-slot">
  <div>
    <div class="border rounded p-2 js-slot-box">
      <div class="d-flex flex-wrap gap-2 align-items-center justify-content-between">
        <div class="d-flex flex-wrap gap-2 align-items-center">
          <select
            class="form-select form-select-sm js-type-select"
            style="max-width: 180px;"
            data-action="change-type">
          </select>
        </div>

        <div class="d-flex gap-2 js-slot-controls">
          <button type="button" class="btn btn-outline-secondary btn-sm js-btn-lock" data-action="toggle-lock">üîì</button>
          <button type="button" class="btn btn-outline-primary btn-sm js-btn-pick" data-action="pick-recipe">üîé</button>
          <button type="button" class="btn btn-outline-secondary btn-sm js-btn-reroll" data-action="reroll-slot">‚Üª</button>
          <button type="button" class="btn btn-outline-danger btn-sm js-btn-remove" data-action="remove-slot">‚àí</button>
        </div>
      </div>

      <div class="mt-2 js-recipe-line"></div>
    </div>
  </div>
</template>

<!-- ================= SCRIPTS ================= -->

<script src="{{ '/assets/js/menu-engine.js' | relative_url }}"></script>
<script src="{{ '/assets/js/menu-builder.js' | relative_url }}"></script>

<script>
(function () {
  "use strict";

  const btn = document.getElementById("toggleCalculatorsBtn");
  const box = document.getElementById("calculatorsCollapse");
  if (!btn || !box) return;

  box.addEventListener("shown.bs.collapse", function () {
    btn.textContent = "Masquer les calculateurs";
    btn.setAttribute("aria-expanded", "true");
  });

  box.addEventListener("hidden.bs.collapse", function () {
    btn.textContent = "Afficher les calculateurs";
    btn.setAttribute("aria-expanded", "false");
  });
})();
</script>
