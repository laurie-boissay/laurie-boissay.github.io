---
layout: page
---

{%- comment -%}
  Layout dâ€™index filtrÃ© (compatible GitHub Pages).

  ParamÃ¨tres attendus dans la page :
  - page.filter_type : "tag" ou "micro"
  - page.filter_id   : lâ€™identifiant (ex: "rapide" ou "omega-3")
  - page.filter_title: titre humain (optionnel)
{%- endcomment -%}

{%- assign page_title = page.filter_title | default: "Recettes : " | append: page.filter_id -%}

<section class="site-container" id="tag-index">

  <style>
    /* Layout tag/micro */
    #tag-index .page-head{
      margin-bottom: 1rem;
    }
    #tag-index .nav-badges{
      margin: .75rem 0 1rem 0;
    }
    #tag-index .recipe-badges-line{
      display:flex;
      flex-wrap:nowrap;
      gap:.35rem;
      list-style:none;
      padding:0;
      margin:.25rem 0 0 0;
      overflow-x:auto;
      -webkit-overflow-scrolling: touch;
    }
    #tag-index .recipe-badges-line li{
      display:flex;
      align-items:center;
      font-size:1.15rem;
      line-height:1;
      white-space:nowrap;
    }
    #tag-index a.badge-link{
      text-decoration:none;
      border-bottom:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-width:2rem;
      padding:.15rem .35rem;
      border-radius:.6rem;
      background: rgba(0,0,0,.05);
    }

    #tag-index .recipe-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: .65rem;
    }
    @media (min-width: 768px){
      #tag-index .recipe-grid{
        grid-template-columns: 1fr 1fr;
      }
    }
    #tag-index .recipe-card{
      padding: .75rem .85rem;
      border-radius: .6rem;
      background: rgba(0,0,0,.03);
      border: 1px solid rgba(0,0,0,.06);
    }
    #tag-index .recipe-card-title{
      margin: 0 0 .25rem 0;
      font-weight: 800;
      font-size: 1.05rem;
    }
    #tag-index .recipe-card-title a{
      text-decoration:none;
      border-bottom:none;
    }
    #tag-index .recipe-card-desc{
      margin: 0;
      opacity: .9;
    }
  </style>

  <header class="page-head">
    <h1 class="page-title">{{ page_title }}</h1>

    <p class="small text-muted" style="margin-bottom:.35rem;">
      Filtre :
      {%- if page.filter_type == "tag" -%}
        tag fonctionnel
      {%- else -%}
        micronutriment
      {%- endif -%}
      â€” <code>{{ page.filter_id }}</code>
    </p>

    <div class="d-flex flex-wrap gap-2">
      <a class="btn btn-outline-secondary btn-sm" href="{{ '/' | relative_url }}">â† Retour Ã  lâ€™index</a>
    </div>
  </header>

  {%- comment -%}
    NAV â€œbadgesâ€ (comme sous le random pick)
  {%- endcomment -%}
  <div class="nav-badges">

    <div class="small text-muted" style="margin-bottom:.15rem;">Tags fonctionnels</div>
    <ul class="recipe-badges-line" aria-label="Tags fonctionnels">
      <li><a class="badge-link" href="{{ '/tags/tres-proteine/' | relative_url }}" title="TrÃ¨s protÃ©inÃ©">ğŸ’ª</a></li>
      <li><a class="badge-link" href="{{ '/tags/riche-en-fibres/' | relative_url }}" title="Riche en fibres">ğŸ’©</a></li>
      <li><a class="badge-link" href="{{ '/tags/rapide/' | relative_url }}" title="Rapide">â±ï¸</a></li>
      <li><a class="badge-link" href="{{ '/tags/congelable/' | relative_url }}" title="CongÃ©lable">â„ï¸</a></li>
      <li><a class="badge-link" href="{{ '/tags/micro-ondable/' | relative_url }}" title="Micro-ondable">â™¨ï¸</a></li>
      <li><a class="badge-link" href="{{ '/tags/peu-calorique/' | relative_url }}" title="Peu calorique">ğŸª¶</a></li>
      <li><a class="badge-link" href="{{ '/tags/calorique/' | relative_url }}" title="Calorique">ğŸ”¥</a></li>
      <li><a class="badge-link" href="{{ '/tags/longue/' | relative_url }}" title="PrÃ©paration longue">ğŸŒ</a></li>
      <li><a class="badge-link" href="{{ '/tags/gout-sucre/' | relative_url }}" title="GoÃ»t sucrÃ©">ğŸ¬</a></li>
    </ul>

    <div class="small text-muted" style="margin:.6rem 0 .15rem 0;">Micronutriments</div>
    <ul class="recipe-badges-line" aria-label="Micronutriments">
      <li><a class="badge-link" href="{{ '/micronutriments/omega-3/' | relative_url }}" title="OmÃ©ga-3">ğŸŸ</a></li>

      <li><a class="badge-link" href="{{ '/micronutriments/vitamine-a/' | relative_url }}" title="Vitamine A">ğŸ‘ï¸</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/vitamine-c/' | relative_url }}" title="Vitamine C">ğŸ‹</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/vitamine-d/' | relative_url }}" title="Vitamine D">ğŸŒ¤ï¸</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/vitamine-e/' | relative_url }}" title="Vitamine E">ğŸ›¡ï¸</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/vitamine-k/' | relative_url }}" title="Vitamine K">ğŸ©¸</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/vitamine-b9/' | relative_url }}" title="Vitamine B9">ğŸŒ±</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/vitamine-b12/' | relative_url }}" title="Vitamine B12">ğŸ¥©</a></li>

      <li><a class="badge-link" href="{{ '/micronutriments/calcium/' | relative_url }}" title="Calcium">ğŸ¦´</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/fer/' | relative_url }}" title="Fer">ğŸ§²</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/magnesium/' | relative_url }}" title="MagnÃ©sium">âš¡</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/potassium/' | relative_url }}" title="Potassium">ğŸŒ</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/zinc/' | relative_url }}" title="Zinc">ğŸ”©</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/selenium/' | relative_url }}" title="SÃ©lÃ©nium">ğŸ§ª</a></li>
      <li><a class="badge-link" href="{{ '/micronutriments/iode/' | relative_url }}" title="Iode">ğŸŒŠ</a></li>
    </ul>
  </div>

  {%- comment -%}
    RÃ©cupÃ¨re toutes les pages de recettes.
    HypothÃ¨se : tes recettes sont des pages avec layout: recipe.
  {%- endcomment -%}
  {%- assign recipes = site.pages | where: "layout", "recipe" -%}

  {%- comment -%}
    Filtrage selon type.
  {%- endcomment -%}
  {%- assign filtered = "" | split: "" -%}
  {%- for r in recipes -%}
    {%- if page.filter_type == "tag" -%}
      {%- if r.tags and r.tags contains page.filter_id -%}
        {%- assign filtered = filtered | push: r -%}
      {%- endif -%}
    {%- else -%}
      {%- if r.badges_nutritionnels and r.badges_nutritionnels contains page.filter_id -%}
        {%- assign filtered = filtered | push: r -%}
      {%- endif -%}
    {%- endif -%}
  {%- endfor -%}

  {%- if filtered.size == 0 -%}
    <p>Aucune recette trouvÃ©e.</p>
  {%- else -%}
    <p class="small text-muted"><strong>{{ filtered.size }}</strong> recette(s).</p>

    <div class="recipe-grid">
      {%- for r in filtered -%}
        <article class="recipe-card">
          <h2 class="recipe-card-title">
            <a href="{{ r.url | relative_url }}">{{ r.recipe_title | default: r.title }}</a>
          </h2>

          {%- if r.description -%}
            <p class="recipe-card-desc">{{ r.description }}</p>
          {%- endif -%}
        </article>
      {%- endfor -%}
    </div>
  {%- endif -%}

</section>

