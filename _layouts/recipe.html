<!DOCTYPE html>
<html lang="fr">
<head>
  {% include head.html %}

  {%- if page.extra_head -%}
    {{ page.extra_head }}
  {%- endif -%}

  <!--
    Styles locaux (layout recipe) :
    - Badges (tags + micronutriments) en ligne, scroll horizontal si nÃ©cessaire
    - Photo recette (optionnelle) avec une taille propre et responsive

    Note : si tu prÃ©fÃ¨res, on pourra dÃ©placer tout Ã§a dans style.css,
    mais lÃ  câ€™est â€œone-shotâ€ et sans impact sur le reste du site.
  -->
  <style>
    /* =========================
       Photo recette
       ========================= */
    .recipe-photo{
      margin: .75rem 0 1rem 0;
    }
    .recipe-photo img{
      display:block;
      width:100%;
      height:auto;
      border-radius:.75rem;
    }

    /* =========================
       Badges (ligne 1 + ligne 2)
       ========================= */
    .recipe-badges-line{
      display:flex;
      flex-wrap:nowrap;
      gap:.35rem;
      list-style:none;
      padding:0;
      margin:.25rem 0 0 0;
      overflow-x:auto;
      -webkit-overflow-scrolling: touch;
    }
    .recipe-badges-line li{
      display:flex;
      align-items:center;
      font-size:1.15rem;
      line-height:1;
      white-space:nowrap;
    }
    .recipe-badges-wrap{
      margin-top:.35rem;
    }

    /* =========================
       LÃ©gende badges
       ========================= */
    .badges-legend{
      margin-top:.5rem;
      font-size:.9rem;
    }
    .badges-legend summary{
      cursor:pointer;
      font-weight:600;
    }
    .badges-legend ul{
      list-style:none;
      padding-left:0;
      margin:.4rem 0 0 0;
    }
    .badges-legend li{
      line-height:1.4;
    }
  </style>
</head>

<body class="container-fluid recipe{% if page.body_id %} {{ page.body_id }}{% endif %}">
  {% comment %}
    On Ã©vite le doublon de titres :
    - recipe-header.html affiche dÃ©jÃ  un h1
    - recipe.html affiche aussi un h1 (.recipe-title)
    => on retire l'include recipe-header.html ici.

    Si tu veux absolument garder recipe-header.html, il faudra supprimer
    le h1 ci-dessous (ou passer recipe-header.html en h2/h3).
  {% endcomment %}

  {% include navbar.html %}

  <main class="site-main">
    <div class="site-container">

      {% include bandeau-non-teste.html %}

      {%- assign hidden_tags = "low-carb-modere,low-carb-strict,gout-sucre" | split: "," -%}

      <header class="recipe-head">
        <h1 class="recipe-title">{{ page.recipe_title | default: page.title }}</h1>

        {% comment %}
          Photo optionnelle (centralisÃ©e dans le layout) :
          - Ã€ activer par recette avec :
              image: "/images/recettes/mon-fichier.webp"
              image_alt: "Texte alternatif"
          - Si image_alt est absent, on retombe sur recipe_title/title.
          - relative_url garantit que Ã§a marche mÃªme si baseurl change.
        {% endcomment %}
        {% if page.image %}
          <figure class="recipe-photo">
            <img
              src="{{ page.image | relative_url }}"
              alt="{{ page.image_alt | default: page.recipe_title | default: page.title | escape }}"
              loading="lazy"
            >
          </figure>
        {% endif %}

        <!-- Sous-titre (si un jour tu veux lâ€™afficher ici plutÃ´t que dans le contenu)
        {% if page.recipe_subtitle %}
          <p class="recipe-subtitle">{{ page.recipe_subtitle }}</p>
        {% endif %}
        -->

        <div class="recipe-badges-wrap">
          <!-- Ligne 1 : badges (tags) -->
          {% if page.tags %}
            <ul class="recipe-badges-line badges-tags" aria-label="Badges">
              {% for tag in page.tags %}
                {% unless hidden_tags contains tag %}
                  {% case tag %}
                    {% when "tres-proteine" %}<li title="TrÃ¨s protÃ©inÃ©">ğŸ’ª</li>
                    {% when "riche-en-fibres" %}<li title="Riche en fibres">ğŸ’©</li>
                    {% when "rapide" %}<li title="Rapide">â±ï¸</li>
                    {% when "congelable" %}<li title="Congelable">â„ï¸</li>
                    {% when "micro-ondable" %}<li title="Micro-ondable">â™¨ï¸</li>
                    {% when "peu-calorique" %}<li title="Peu calorique">ğŸª¶</li>
                    {% when "calorique" %}<li title="Calorique">ğŸ”¥</li>
                    {% when "longue" %}<li title="PrÃ©paration longue">ğŸŒ</li>
                  {% endcase %}
                {% endunless %}
              {% endfor %}
            </ul>
          {% endif %}

          <!-- Ligne 2 : micronutriments -->
          {% assign micros = page.badges_nutritionnels | default: "" %}
          {% if micros and micros.size > 0 %}
            <ul class="recipe-badges-line badges-micro" aria-label="Micronutriments">
              {% for m in micros %}
                {% case m %}
                  {% when "omega-3" %}<li title="OmÃ©ga-3">ğŸŸ</li>

                  {% when "vitamine-a" %}<li title="Vitamine A">ğŸ‘ï¸</li>
                  {% when "vitamine-c" %}<li title="Vitamine C">ğŸ‹</li>
                  {% when "vitamine-d" %}<li title="Vitamine D">ğŸŒ¤ï¸</li>
                  {% when "vitamine-e" %}<li title="Vitamine E">ğŸ›¡ï¸</li>
                  {% when "vitamine-k" %}<li title="Vitamine K">ğŸ©¸</li>
                  {% when "vitamine-b9" %}<li title="Vitamine B9">ğŸŒ±</li>
                  {% when "vitamine-b12" %}<li title="Vitamine B12">ğŸ¥©</li>

                  {% when "calcium" %}<li title="Calcium">ğŸ¦´</li>
                  {% when "fer" %}<li title="Fer">ğŸ§²</li>
                  {% when "magnesium" %}<li title="MagnÃ©sium">âš¡</li>
                  {% when "potassium" %}<li title="Potassium">ğŸŒ</li>
                  {% when "zinc" %}<li title="Zinc">ğŸ”©</li>
                  {% when "selenium" %}<li title="SÃ©lÃ©nium">ğŸ§ª</li>
                  {% when "iode" %}<li title="Iode">ğŸŒŠ</li>
                {% endcase %}
              {% endfor %}
            </ul>
          {% endif %}

          <!-- LÃ©gende des badges -->
          <details class="badges-legend">
            <summary>LÃ©gende des badges</summary>
            <ul>
              <li>ğŸ’ª TrÃ¨s protÃ©inÃ©</li>
              <li>ğŸ’© Riche en fibres</li>
              <li>â±ï¸ Rapide Ã  prÃ©parer</li>
              <li>â„ï¸ Congelable</li>
              <li>â™¨ï¸ Micro-ondable</li>
              <li>ğŸª¶ Peu calorique</li>
              <li>ğŸ”¥ Calorique</li>
              <li>ğŸŒ PrÃ©paration longue / temps passif important</li>
              <li>ğŸŸ OmÃ©ga-3</li>
              <li>ğŸ‘ï¸ Vitamine A</li>
              <li>ğŸ‹ Vitamine C</li>
              <li>ğŸŒ¤ï¸ Vitamine D</li>
              <li>ğŸ›¡ï¸ Vitamine E</li>
              <li>ğŸ©¸ Vitamine K</li>
              <li>ğŸŒ± Vitamine B9</li>
              <li>ğŸ¥© Vitamine B12</li>
              <li>ğŸ¦´ Calcium</li>
              <li>ğŸ§² Fer</li>
              <li>âš¡ MagnÃ©sium</li>
              <li>ğŸŒ Potassium</li>
              <li>ğŸ”© Zinc</li>
              <li>ğŸ§ª SÃ©lÃ©nium</li>
              <li>ğŸŒŠ Iode</li>
            </ul>
          </details>
        </div>
      </header>

      <div class="content-surface recipe-surface">
        {{ content }}
      </div>

      {% include footer.html %}

    </div>
  </main>

  {% include scripts.html %}
</body>
</html>
