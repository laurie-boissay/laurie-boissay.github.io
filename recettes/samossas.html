<section id="random-recipe">
  <h2>Qu'est-ce qu'on mange ?</h2>

  <div id="recipe-container"></div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Liste des recettes avec leurs titres, descriptions, tags et le statut de test
      const recipes = [
        { 
          "title": "Avocat farci Å“uf & saumon",
          "description": "Avocat farci aux Å“ufs et saumon fumÃ©. Plat froid low carb modÃ©rÃ©, simple et rassasiant.",
          "recipe_tested": false,
          "url": "/recettes/avocat-farci-oeuf-et-saumon.html",
          "tags": ["low-carb-moderÃ©", "tres-proteine", "rapide", "calorique"],
          "badges": ["omega-3", "vitamine-b12"]
        },
        { 
          "title": "Samossas low carb Ã  la viande",
          "description": "Alternative low carb aux samossas classiques : enveloppe Ã  base dâ€™omelette fine ou de nori, garniture viande Ã©picÃ©e.",
          "recipe_tested": false,
          "url": "/recettes/samossas.html",
          "tags": ["low-carb-moderÃ©", "tres-proteine"],
          "badges": ["vitamine-b12"]
        },
        // Assure-toi que toutes tes autres recettes sont Ã©galement incluses ici
      ];

      console.log("Nombre de recettes disponibles : ", recipes.length); // VÃ©rifie si toutes les recettes sont prÃ©sentes
      console.log("Recettes rÃ©cupÃ©rÃ©es : ", recipes); // Affiche toutes les recettes dans la console

      // Fonction pour choisir une recette au hasard
      function getRandomRecipe() {
        const randomIndex = Math.floor(Math.random() * recipes.length);
        return recipes[randomIndex];
      }

      // SÃ©lectionner une recette au hasard
      const randomRecipe = getRandomRecipe();

      // VÃ©rifier la recette choisie dans la console
      console.log("Recette sÃ©lectionnÃ©e : ", randomRecipe);

      // Fonction pour gÃ©nÃ©rer les badges
      function generateBadges(badges) {
        return badges.map(function(badge) {
          switch (badge) {
            case 'tres-proteine': return 'ğŸ’ª';
            case 'riche-en-fibres': return 'ğŸ’©';
            case 'rapide': return 'â±ï¸';
            case 'congelable': return 'â„ï¸';
            case 'micro-ondable': return 'â™¨ï¸';
            case 'peu-calorique': return 'ğŸª¶';
            case 'calorique': return 'ğŸ”¥';
            case 'longue': return 'ğŸŒ';
            case 'omega-3': return 'ğŸŸ';
            case 'vitamine-b12': return 'ğŸ¥©';
            default: return '';
          }
        }).join(' ');
      }

      // CrÃ©er le HTML pour afficher la recette
      const recipeContainer = document.getElementById('recipe-container');
      
      if (randomRecipe) {
        recipeContainer.innerHTML = `
          <div class="recipe-card">
            <h3 class="recipe-title">
              <a href="${randomRecipe.url}">${randomRecipe.title}</a>
              ${randomRecipe.recipe_tested === false ? 
                '<span class="badge bg-warning text-dark ms-2">Recette non testÃ©e</span>' : ''}
            </h3>
            <p>${randomRecipe.description}</p>
            <div class="recipe-badges">${generateBadges(randomRecipe.badges)}</div>
          </div>
        `;
      } else {
        recipeContainer.innerHTML = `<p>Aucune recette disponible.</p>`;
      }
    });
  </script>
</section>

