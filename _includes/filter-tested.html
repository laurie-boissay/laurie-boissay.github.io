<!-- =========================================================
     Filtre UI : afficher uniquement les recettes testées
     Dépendance :
     - chaque carte DOIT être enveloppée par :
       <div class="recipe-item" data-tested="true|false">...</div>
     ========================================================= -->

<div class="d-flex flex-wrap align-items-center gap-2 mb-3" id="tested-filter">
  <button
    type="button"
    class="btn btn-sm btn-outline-primary"
    id="btn-only-tested"
    aria-pressed="false"
  >
    Voir seulement les recettes testées
  </button>
</div>

<script>
/* =========================================================
   Filtre "Seulement recettes testées"
   - Toggle simple
   - Basé sur data-tested="true|false"
   ========================================================= */
document.addEventListener("DOMContentLoaded", function () {
  const btn = document.getElementById("btn-only-tested");
  const items = document.querySelectorAll(".recipe-item[data-tested]");

  // Sécurité : si le wrapping n’existe pas, on masque le bouton
  if (!btn || items.length === 0) {
    if (btn) btn.style.display = "none";
    return;
  }

  function applyFilter(onlyTested) {
    items.forEach((el) => {
      const isTested = el.getAttribute("data-tested") === "true";
      el.style.display = (onlyTested && !isTested) ? "none" : "";
    });

    btn.setAttribute("aria-pressed", String(onlyTested));
    btn.classList.toggle("btn-primary", onlyTested);
    btn.classList.toggle("btn-outline-primary", !onlyTested);

    btn.textContent = onlyTested
      ? "Voir toutes les recettes"
      : "Voir seulement les recettes testées";
  }

  let onlyTested = false;
  applyFilter(onlyTested);

  btn.addEventListener("click", function () {
    onlyTested = !onlyTested;
    applyFilter(onlyTested);
  });
});
</script>

